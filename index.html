<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora Exortipster</title>
  <style>
    :root {
      --verde-bet: #0b3d0b;
      --verde-claro: #3bb143;
      --amarillo-bet: #ffc600;
      --gris-oscuro: #1a1a1a;
      --gris-claro: #e0e0e0;
      --rojo: #d32f2f;
    }
    body {
      font-family: Arial, sans-serif;
      background: var(--gris-oscuro);
      color: var(--gris-claro);
      display: flex;
      justify-content: center;
      padding: 30px;
    }
    .container {
      background: var(--verde-bet);
      padding: 25px 30px;
      border-radius: 12px;
      max-width: 450px;
      width: 100%;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
      border: 2px solid var(--amarillo-bet);
    }
    h1 {
      text-align: center;
      color: var(--amarillo-bet);
      margin-bottom: 25px;
      font-size: 1.6rem;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
      color: var(--gris-claro);
    }
    input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      margin-top: 6px;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      background: #f0f0f0;
      color: #222;
    }
    .result {
      margin-top: 25px;
      background: #fff;
      color: #000;
      padding: 15px;
      border-radius: 8px;
      font-size: 1.1rem;
    }
    .row {
      margin-top: 12px;
    }
    .highlight {
      font-weight: bold;
    }
    .verde {
      color: var(--verde-claro);
    }
    .rojo {
      color: var(--rojo);
    }
    .mensaje {
      font-weight: bold;
      margin-top: 15px;
      font-size: 1rem;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      border: none;
      background: var(--amarillo-bet);
      color: #222;
      font-weight: bold;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #e0b000;
    }
    .cuota-display {
      font-size: 0.9rem;
      color: var(--gris-claro);
      margin-top: 4px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Calculadora Exortipster</h1>

    <label for="equipo1">Equipo 1</label>
    <input type="text" id="equipo1" placeholder="Nombre del Equipo 1" />

    <label for="cuota1">Cuota 1 (Americana o Decimal)</label>
    <input type="text" id="cuota1" placeholder="Ej: -500 o 1.91" />
    <div id="cuota1Decimal" class="cuota-display">üîÅ Conversi√≥n: ‚Äî</div>

    <label for="empate">Empate</label>
    <input type="text" id="empate" placeholder="Empate" value="Empate" />

    <label for="cuotaEmpate">Cuota Empate (opcional)</label>
    <input type="text" id="cuotaEmpate" placeholder="Ej: +250 o 3.5 (puede dejarse vac√≠o)" />
    <div id="cuotaEmpateDecimal" class="cuota-display">üîÅ Conversi√≥n: ‚Äî</div>

    <label for="equipo2">Equipo 2</label>
    <input type="text" id="equipo2" placeholder="Nombre del Equipo 2" />

    <label for="cuota2">Cuota 2 (Americana o Decimal)</label>
    <input type="text" id="cuota2" placeholder="Ej: +200 o 2.5" />
    <div id="cuota2Decimal" class="cuota-display">üîÅ Conversi√≥n: ‚Äî</div>

    <label for="monto">Monto total a apostar (MXN)</label>
    <input type="text" id="monto" value="50000" />

    <div class="result" id="resultado" style="display:none;">
      <div class="row">Apuesta Equipo 1: <span id="apuesta1" class="highlight"></span> MXN</div>
      <div class="row" id="filaEmpate">Apuesta Empate: <span id="apuestaEmpate" class="highlight"></span> MXN</div>
      <div class="row">Apuesta Equipo 2: <span id="apuesta2" class="highlight"></span> MXN</div>

      <div class="row">Ganancia si gana Equipo 1: <span id="ganancia1" class="highlight"></span> MXN</div>
      <div class="row" id="filaGananciaEmpate">Ganancia si hay Empate: <span id="gananciaEmpate" class="highlight"></span> MXN</div>
      <div class="row">Ganancia si gana Equipo 2: <span id="ganancia2" class="highlight"></span> MXN</div>

      <div class="row">Ganancia neta m√≠nima: <span id="gananciaNeta" class="highlight"></span> MXN</div>
      <div class="row">Porcentaje: <span id="porcentaje" class="highlight"></span></div>
      <div id="mensaje" class="mensaje"></div>
      <button onclick="copiarResultados()">üìã Copiar resultados</button>
    </div>
  </div>

  <script>
    const cuota1 = document.getElementById('cuota1');
    const cuotaEmpate = document.getElementById('cuotaEmpate');
    const cuota2 = document.getElementById('cuota2');
    const monto = document.getElementById('monto');

    const resultado = document.getElementById('resultado');
    const filaEmpate = document.getElementById('filaEmpate');
    const filaGananciaEmpate = document.getElementById('filaGananciaEmpate');

    const apuesta1 = document.getElementById('apuesta1');
    const apuestaEmpate = document.getElementById('apuestaEmpate');
    const apuesta2 = document.getElementById('apuesta2');
    const ganancia1 = document.getElementById('ganancia1');
    const gananciaEmpate = document.getElementById('gananciaEmpate');
    const ganancia2 = document.getElementById('ganancia2');
    const gananciaNeta = document.getElementById('gananciaNeta');
    const porcentaje = document.getElementById('porcentaje');
    const mensaje = document.getElementById('mensaje');

    const cuota1DecimalDisplay = document.getElementById('cuota1Decimal');
    const cuotaEmpateDecimalDisplay = document.getElementById('cuotaEmpateDecimal');
    const cuota2DecimalDisplay = document.getElementById('cuota2Decimal');

    function americanoADecimal(m) {
      if (isNaN(m) || m === 0) return NaN;
      return m > 0 ? (m / 100) + 1 : (100 / Math.abs(m)) + 1;
    }

    function decimalAAmericano(d) {
      if (isNaN(d) || d < 1.01) return NaN;
      return d >= 2 ? Math.round((d - 1) * 100) : Math.round(-100 / (d - 1));
    }

    function mostrarConversion(momio, display) {
      if (isNaN(momio)) {
        display.textContent = "üîÅ Conversi√≥n: ‚Äî";
        return;
      }
      if (Math.abs(momio) >= 100) {
        display.textContent = `üîÅ Cuota decimal: ${americanoADecimal(momio).toFixed(2)}`;
      } else {
        const americano = decimalAAmericano(momio);
        display.textContent = `üîÅ Momio americano: ${americano > 0 ? "+" : ""}${americano}`;
      }
    }

    function formatear(num) {
      return num.toLocaleString('es-MX', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function calcular() {
      const c1 = parseFloat(cuota1.value.replace(',', '.'));
      const cE = parseFloat(cuotaEmpate.value.replace(',', '.'));
      const c2 = parseFloat(cuota2.value.replace(',', '.'));
      const montoTotal = parseFloat(monto.value.replace(',', '.'));

      if (isNaN(c1) || isNaN(c2) || isNaN(montoTotal) || montoTotal <= 0) {
        resultado.style.display = "none";
        return;
      }

      mostrarConversion(c1, cuota1DecimalDisplay);
      mostrarConversion(cE, cuotaEmpateDecimalDisplay);
      mostrarConversion(c2, cuota2DecimalDisplay);

      const cuota1Dec = Math.abs(c1) >= 100 ? americanoADecimal(c1) : c1;
      const cuotaEmpateDec = isNaN(cE) ? null : (Math.abs(cE) >= 100 ? americanoADecimal(cE) : cE);
      const cuota2Dec = Math.abs(c2) >= 100 ? americanoADecimal(c2) : c2;

      let inversiones, sumaInv;

      if (cuotaEmpateDec) {
        filaEmpate.style.display = '';
        filaGananciaEmpate.style.display = '';
        const inv1 = 1 / cuota1Dec;
        const invE = 1 / cuotaEmpateDec;
        const inv2 = 1 / cuota2Dec;
        sumaInv = inv1 + invE + inv2;
        inversiones = [inv1, invE, inv2];
      } else {
        filaEmpate.style.display = 'none';
        filaGananciaEmpate.style.display = 'none';
        const inv1 = 1 / cuota1Dec;
        const inv2 = 1 / cuota2Dec;
        sumaInv = inv1 + inv2;
        inversiones = [inv1, inv2];
      }

      const apuestas = inversiones.map(inv => montoTotal * inv / sumaInv);
      const retornos = [
        apuestas[0] * cuota1Dec,
        cuotaEmpateDec ? apuestas[1] * cuotaEmpateDec : null,
        cuotaEmpateDec ? apuestas[2] * cuota2Dec : apuestas[1] * cuota2Dec
      ];

      apuesta1.textContent = formatear(apuestas[0]);
      if (cuotaEmpateDec) apuestaEmpate.textContent = formatear(apuestas[1]);
      apuesta2.textContent = formatear(cuotaEmpateDec ? apuestas[2] : apuestas[1]);

      ganancia1.textContent = formatear(retornos[0]);
      if (cuotaEmpateDec) gananciaEmpate.textContent = formatear(retornos[1]);
      ganancia2.textContent = formatear(retornos[2]);

      const gananciaNetaMin = Math.min(...retornos.filter(r => r !== null)) - montoTotal;
      const porcentajeGanancia = (gananciaNetaMin / montoTotal) * 100;

      gananciaNeta.textContent = formatear(gananciaNetaMin);
      porcentaje.textContent = formatear(porcentajeGanancia) + " %";

      mensaje.textContent = gananciaNetaMin >= 0
        ? "‚úîÔ∏è Existen ganancias posibles con estos momios."
        : "‚ùå No hay ganancias posibles con estos momios.";
      mensaje.className = gananciaNetaMin >= 0 ? "mensaje verde" : "mensaje rojo";

      resultado.style.display = "block";
    }

    function copiarResultados() {
      const texto = document.querySelector(".result").innerText;
      navigator.clipboard.writeText(texto)
        .then(() => alert("‚úÖ Resultados copiados al portapapeles."))
        .catch(() => alert("‚ùå Error al copiar los resultados."));
    }

    ['input', 'change'].forEach(evt => {
      cuota1.addEventListener(evt, calcular);
      cuotaEmpate.addEventListener(evt, calcular);
      cuota2.addEventListener(evt, calcular);
      monto.addEventListener(evt, calcular);
    });

    window.onload = calcular;
  </script>
</body>
</html>
